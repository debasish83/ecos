H = [160.870274, 47.410025, 98.347810, 66.304747, 76.572226, 85.380320, 77.619433, 39.816294, 44.287697, 52.381790, 49.774007, 51.436631, 49.418719, 60.345879, 77.743598, 58.789482, 49.977940, 57.138895, 40.334225, 98.001092, 77.419102, 94.576217, 68.680509, 56.389319, 46.400446; 47.410025, 77.744584, 54.711439, 33.913666, 36.674393, 44.588932, 48.246081, 24.628807, 23.391492, 30.757141, 29.106614, 32.182559, 27.890201, 37.595840, 41.831040, 30.953648, 32.449627, 32.827423, 26.577170, 60.917010, 47.630431, 46.994528, 42.432578, 32.484357, 25.048788; 98.347810, 54.711439, 189.412833, 67.844924, 77.748269, 87.494005, 86.763059, 40.744924, 51.143224, 57.448205, 50.854556, 57.093882, 52.870065, 62.302357, 82.120040, 60.226470, 62.086359, 59.854807, 42.296439, 96.990613, 81.658317, 101.645003, 70.737750, 65.947838, 49.416569; 66.304747, 33.913666, 67.844924, 110.602330, 53.560710, 60.136817, 54.935253, 30.111026, 32.094816, 38.898019, 33.651597, 34.844248, 37.285636, 49.174067, 55.066371, 38.802374, 34.573309, 43.698370, 30.200063, 67.678900, 53.463847, 69.600860, 48.521698, 39.760687, 32.919455; 76.572226, 36.674393, 77.748269, 53.560710, 141.693657, 72.093544, 59.523625, 36.185030, 37.881099, 48.881214, 40.828447, 42.796040, 43.634909, 49.153123, 51.857680, 47.984455, 41.848055, 46.019368, 36.407581, 64.788970, 56.729611, 86.454397, 49.266927, 51.380620, 44.729736; 85.380320, 44.588932, 87.494005, 60.136817, 72.093544, 152.384231, 68.530972, 36.691318, 42.720459, 48.739478, 43.233853, 47.364228, 47.647781, 61.978364, 66.044287, 48.919433, 46.527775, 48.159173, 36.911266, 89.426819, 68.236161, 91.347619, 58.045590, 54.519773, 43.422522; 77.619433, 48.246081, 86.763059, 54.935253, 59.523625, 68.530972, 144.853456, 35.359863, 38.681964, 49.787991, 42.554106, 45.382136, 43.026460, 52.655726, 67.684302, 44.654587, 48.847714, 48.524652, 35.047035, 85.885030, 68.844167, 79.465095, 62.223556, 49.920754, 37.447749; 39.816294, 24.628807, 40.744924, 30.111026, 36.185030, 36.691318, 35.359863, 60.078960, 20.533539, 27.483880, 24.709984, 25.883439, 21.975585, 27.607064, 30.825684, 22.177389, 24.535377, 29.069003, 22.197089, 39.793700, 33.688654, 42.108459, 32.599682, 29.828396, 23.019682; 44.287697, 23.391492, 51.143224, 32.094816, 37.881099, 42.720459, 38.681964, 20.533539, 74.085398, 25.963213, 22.533662, 27.246738, 24.821803, 36.275449, 37.879856, 30.478763, 24.306641, 31.731166, 21.996045, 55.938668, 37.859198, 45.546791, 34.769153, 31.742818, 23.206277; 52.381790, 30.757141, 57.448205, 38.898019, 48.881214, 48.739478, 49.787991, 27.483880, 25.963213, 85.666906, 34.024980, 32.103359, 28.718808, 32.554961, 40.310336, 37.160455, 31.550326, 34.878292, 28.026498, 51.340176, 45.078821, 56.179317, 38.005740, 39.741729, 31.874879; 49.774007, 29.106614, 50.854556, 33.651597, 40.828447, 43.233853, 42.554106, 24.709984, 22.533662, 34.024980, 77.412557, 29.057042, 29.398382, 34.819579, 39.503613, 30.929946, 31.481676, 31.688338, 25.798915, 52.730347, 46.102408, 50.243397, 37.759698, 33.767955, 27.379751; 51.436631, 32.182559, 57.093882, 34.844248, 42.796040, 47.364228, 45.382136, 25.883439, 27.246738, 32.103359, 29.057042, 85.653876, 28.078094, 35.632044, 42.076556, 36.183995, 33.124970, 32.463400, 23.616801, 54.046493, 43.753121, 52.829895, 38.554279, 36.016309, 30.074117; 49.418719, 27.890201, 52.870065, 37.285636, 43.634909, 47.647781, 43.026460, 21.975585, 24.821803, 28.718808, 29.398382, 28.078094, 75.937401, 35.951216, 43.620203, 29.645214, 29.539408, 31.697040, 25.045615, 54.911950, 41.665622, 47.851285, 37.366457, 30.611221, 27.438545; 60.345879, 37.595840, 62.302357, 49.174067, 49.153123, 61.978364, 52.655726, 27.607064, 36.275449, 32.554961, 34.819579, 35.632044, 35.951216, 112.961015, 54.164888, 40.069310, 32.924315, 45.903173, 32.559671, 81.272861, 57.298891, 60.054528, 48.162332, 37.076912, 31.564793; 77.743598, 41.831040, 82.120040, 55.066371, 51.857680, 66.044287, 67.684302, 30.825684, 37.879856, 40.310336, 39.503613, 42.076556, 43.620203, 54.164888, 142.989766, 47.385892, 40.628223, 48.450527, 33.994870, 93.222106, 69.091684, 62.701317, 63.017573, 40.964288, 37.487925; 58.789482, 30.953648, 60.226470, 38.802374, 47.984455, 48.919433, 44.654587, 22.177389, 30.478763, 37.160455, 30.929946, 36.183995, 29.645214, 40.069310, 47.385892, 88.387776, 31.640776, 34.823741, 26.637137, 60.024725, 46.326000, 60.475217, 42.289456, 37.255772, 30.900476; 49.977940, 32.449627, 62.086359, 34.573309, 41.848055, 46.527775, 48.847714, 24.535377, 24.306641, 31.550326, 31.481676, 33.124970, 29.539408, 32.924315, 40.628223, 31.640776, 83.709794, 34.562403, 25.364975, 57.648458, 46.651266, 54.892106, 40.698506, 33.900296, 28.877955; 57.138895, 32.827423, 59.854807, 43.698370, 46.019368, 48.159173, 48.524652, 29.069003, 31.731166, 34.878292, 31.688338, 32.463400, 31.697040, 45.903173, 48.450527, 34.823741, 34.562403, 87.455263, 28.597210, 67.130553, 49.185881, 53.764714, 39.573469, 36.140294, 33.339424; 40.334225, 26.577170, 42.296439, 30.200063, 36.407581, 36.911266, 35.047035, 22.197089, 21.996045, 28.026498, 25.798915, 23.616801, 25.045615, 32.559671, 33.994870, 26.637137, 25.364975, 28.597210, 55.406468, 47.639461, 36.387275, 39.330884, 33.162996, 27.108804, 23.004628; 98.001092, 60.917010, 96.990613, 67.678900, 64.788970, 89.426819, 85.885030, 39.793700, 55.938668, 51.340176, 52.730347, 54.046493, 54.911950, 81.272861, 93.222106, 60.024725, 57.648458, 67.130553, 47.639461, 203.076438, 85.754687, 90.972823, 78.896251, 57.268940, 45.861106; 77.419102, 47.630431, 81.658317, 53.463847, 56.729611, 68.236161, 68.844167, 33.688654, 37.859198, 45.078821, 46.102408, 43.753121, 41.665622, 57.298891, 69.091684, 46.326000, 46.651266, 49.185881, 36.387275, 85.754687, 143.831139, 72.371012, 61.975968, 47.726359, 38.466583; 94.576217, 46.994528, 101.645003, 69.600860, 86.454397, 91.347619, 79.465095, 42.108459, 45.546791, 56.179317, 50.243397, 52.829895, 47.851285, 60.054528, 62.701317, 60.475217, 54.892106, 53.764714, 39.330884, 90.972823, 72.371012, 186.226835, 63.619403, 63.390900, 48.745579; 68.680509, 42.432578, 70.737750, 48.521698, 49.266927, 58.045590, 62.223556, 32.599682, 34.769153, 38.005740, 37.759698, 38.554279, 37.366457, 48.162332, 63.017573, 42.289456, 40.698506, 39.573469, 33.162996, 78.896251, 61.975968, 63.619403, 119.229581, 40.677796, 33.702675; 56.389319, 32.484357, 65.947838, 39.760687, 51.380620, 54.519773, 49.920754, 29.828396, 31.742818, 39.741729, 33.767955, 36.016309, 30.611221, 37.076912, 40.964288, 37.255772, 33.900296, 36.140294, 27.108804, 57.268940, 47.726359, 63.390900, 40.677796, 94.520447, 33.002620; 46.400446, 25.048788, 49.416569, 32.919455, 44.729736, 43.422522, 37.447749, 23.019682, 23.206277, 31.874879, 27.379751, 30.074117, 27.438545, 31.564793, 37.487925, 30.900476, 28.877955, 33.339424, 23.004628, 45.861106, 38.466583, 48.745579, 33.702675, 33.002620, 72.006331];

f = [-1634.948695; -952.633400; -1753.063905; -1150.176377; -1308.752848; -1439.874947; -1462.720012; -778.762240; -784.637225; -1037.940577; -963.404364; -933.869109; -902.750379; -1124.362566; -1336.368029; -1052.732868; -956.851072; -1027.218950; -789.388597; -1699.327914; -1449.257866; -1688.641826; -1224.635249; -1039.747418; -879.164137];

n = size(H, 1);
bl = zeros(n, 1);
bu = ones(n, 1);

A = ones(1, n);
b = 1;

addpath /home/debasish/mosek/7/toolbox/r2013a/
tic;
mosekx = quadprog(H,f,[],[],A,b,bl,bu);
mosekTime = toc;

%add ecos path
addpath /home/debasish/ecos/matlab
[ecosx, ~, ~, ~, ~, ecosTime] = ecosqp(H,f,[],[],A,b,bl,bu,ecosoptimset('verbose', 0, 'feastol', 1e-8));

%Prepare gram matrix for equality constraint

%Add ADMM path
addpath /home/debasish/ecos/matlab/admm
lambdaH = [H, A'; A, 0];

rho = sqrt(norm(lambdaH, 1));

fprintf('rho gram %g\n', rho);

tic;
[xadmm history admmIters] = qpproximal(H, f, randn(1), A, b, bl, bu, rho, 1.0, 0.0);
admmTime = toc;

tic;
[xacc history accIters] = qpaccelerated(H, f, randn(1), A, b, bl, bu, rho, 0.0);
accTime = toc;

fprintf('mosekx\n');
mosekx

fprintf('admmx\n');
xadmm

fprintf('mosek-ecos norm %g\n', norm(mosekx - ecosx, Inf));
fprintf('mosek-admm norm %g iters %g\n', norm(mosekx - xadmm, Inf), admmIters);
fprintf('mosek-accadmm norm %g iters %g\n', norm(mosekx - xacc, Inf), accIters);
fprintf('mosek %g ecos %g admm %g admmacc %g\n', mosekTime, admmTime, accTime, ecosTime);


